<?php
// ==================================================================
// ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ (‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å AJAX ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô family.php?q=1)
// ==================================================================
echo "<h3>üìå ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å AJAX</h3>";

// ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Undefined index
$q_raw = isset($_GET['q']) ? $_GET['q'] : "";  
$q = intval($q_raw);

echo "‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ \$_GET['q'] = " . $q_raw . "<br>";
echo "‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ \$q (intval) = " . $q . "<br><br>";


// ==================================================================
// ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MySQL (‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠)
// ==================================================================
echo "<h3>üìå ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏à‡∏≥‡∏•‡∏≠‡∏á)</h3>";

$hostname = "localhost";
$username = "username";
$password = "password";
$database = "ajax_demo";

echo "hostname = $hostname<br>";
echo "username = $username<br>";
echo "password = $password<br>";
echo "database = $database<br><br>";


// ==================================================================
// ‡∏à‡∏≥‡∏•‡∏≠‡∏á SQL Query + ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Prepared Statement
// ==================================================================
echo "<h3>üìå ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ SQL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ (‡∏à‡∏≥‡∏•‡∏≠‡∏á)</h3>";

$sql = "SELECT * FROM user WHERE id = ?";
echo "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SQL: $sql<br>";
echo "‡∏ú‡∏π‡∏Å‡∏Ñ‡πà‡∏≤ id = $q<br><br>";


// ==================================================================
// ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Fake Database)
// ==================================================================
echo "<h3>üìå ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏à‡∏≥‡∏•‡∏≠‡∏á)</h3>";

$fake_database = [
    1 => ["FirstName" => "Peter",  "LastName" => "Griffin", "Age" => 41, "Hometown" => "Quahog", "Job" => "Brewery"],
    2 => ["FirstName" => "Lois",   "LastName" => "Griffin", "Age" => 40, "Hometown" => "Newport", "Job" => "Piano Teacher"],
    3 => ["FirstName" => "Joseph", "LastName" => "Swanson","Age" => 39, "Hometown" => "Quahog", "Job" => "Police Officer"],
    4 => ["FirstName" => "Glenn",  "LastName" => "Quagmire","Age" => 41, "Hometown" => "Quahog", "Job" => "Pilot"],
];

echo "‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ \$fake_database (array) = <pre>";
print_r($fake_database);
echo "</pre>";


// ==================================================================
// ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà SELECT ‡πÑ‡∏î‡πâ (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô mysqli_fetch_array)
// ==================================================================
if (isset($fake_database[$q])) {

    $row = $fake_database[$q];

    echo "<h3>üìå Row ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏à‡∏≥‡∏•‡∏≠‡∏á)</h3>";
    echo "<pre>";
    print_r($row);
    echo "</pre>";

    echo "
    <table border='1' cellpadding='10'>
        <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Age</th>
            <th>Hometown</th>
            <th>Job</th>
        </tr>
        <tr>
            <td>{$row['FirstName']}</td>
            <td>{$row['LastName']}</td>
            <td>{$row['Age']}</td>
            <td>{$row['Hometown']}</td>
            <td>{$row['Job']}</td>
        </tr>
    </table>
    ";

} else {
    echo "<h3 style='color:red;'>‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ID = $q</h3>";
}
?>
